<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noise Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 800px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #1e3c72;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 10px;
        }

        .btn-toggle {
            padding: 15px 40px;
            font-size: 18px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            text-transform: uppercase;
            background: #4CAF50;
            color: white;
        }

        .btn-toggle:hover {
            transform: translateY(-2px);
        }

        .btn-toggle.off {
            background: #f44336;
        }

        .btn-toggle.off:hover {
            box-shadow: 0 5px 15px rgba(244, 67, 54, 0.4);
        }

        .btn-toggle.on {
            background: #4CAF50;
        }

        .btn-toggle.on:hover {
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }

        .status {
            font-size: 1.2em;
            color: #666;
            font-weight: 500;
        }

        .status.active {
            color: #4CAF50;
        }
        
        .timer {
            background: #f5f5f5;
            padding: 0px;
            border-radius: 10px;
            text-align: center;
        }

        .timer h2 {
            color: #1e3c72;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .timer-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .timer-input {
            padding: 10px;
            font-size: 16px;
            border: 2px solid #2a5298;
            border-radius: 5px;
            width: 80px;
            text-align: center;
        }

        .timer-display {
            font-size: 2em;
            font-weight: bold;
            color: #1e3c72;
            margin-top: 15px;
            margin-bottom: 10px;
        }
        .presets {
            margin-bottom: 30px;
        }

        .presets h2 {
            color: #1e3c72;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .preset-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
        }

        .preset-btn {
            padding: 12px;
            background: #2a5298;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .preset-btn:hover {
            background: #1e3c72;
            transform: translateY(-2px);
        }

        /* Color-coded preset buttons */
        .preset-btn[data-preset="infra"] { background: #b71c1c; }
        .preset-btn[data-preset="infra"]:hover { background: #8b0000; }
        
        .preset-btn[data-preset="brown"] { background: #795548; }
        .preset-btn[data-preset="brown"]:hover { background: #5d4037; }
        
        .preset-btn[data-preset="pink"] { background: #e91e63; }
        .preset-btn[data-preset="pink"]:hover { background: #c2185b; }
        
        .preset-btn[data-preset="white"] { background: #e0e0e0; color: #333; }
        .preset-btn[data-preset="white"]:hover { background: #f5f5f5; }
        
        .preset-btn[data-preset="blue"] { background: #2196f3; }
        .preset-btn[data-preset="blue"]:hover { background: #1976d2; }
        
        .preset-btn[data-preset="violet"] { background: #9c27b0; }
        .preset-btn[data-preset="violet"]:hover { background: #7b1fa2; }
        
        .preset-btn[data-preset="ultra"] { background: #7c4dff; }
        .preset-btn[data-preset="ultra"]:hover { background: #651fff; }
        
        .preset-btn[data-preset="grey"] { background: #9e9e9e; }
        .preset-btn[data-preset="grey"]:hover { background: #757575; }
        
        .preset-btn[data-preset="green"] { background: #4caf50; }
        .preset-btn[data-preset="green"]:hover { background: #388e3c; }
        
        
        
        
        .sliders {
            margin-bottom: 30px;
        }

        .sliders h2 {
            color: #1e3c72;
            margin-bottom: 20px;
            font-size: 1.5em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .volume-controls {
            display: flex;
            gap: 10px;
        }

        .volume-btn {
            padding: 8px 16px;
            background: #2a5298;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s;
        }

        .volume-btn:hover {
            background: #1e3c72;
            transform: translateY(-2px);
        }

        .slider-group {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .slider-name {
            flex: 0 0 180px;
            color: #333;
            font-weight: 500;
            font-size: 14px;
        }

        .slider {
            flex: 1;
            height: 8px;
            border-radius: 5px;
            outline: none;
            background: #ddd;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #2a5298;
            cursor: pointer;
            transition: all 0.3s;
        }

        .slider::-webkit-slider-thumb:hover {
            background: #1e3c72;
            transform: scale(1.2);
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #2a5298;
            cursor: pointer;
            border: none;
        }

        .slider-value {
            flex: 0 0 50px;
            text-align: right;
            color: #333;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽµ Noise Generator</h1>

        <div class="controls">
            <button class="btn-toggle off" id="toggleBtn">ON</button>
            <div class="status" id="status">Status: Off</div>
        </div>

        <div class="timer">
            <div class="timer-display" id="timerDisplay">00:00:00</div>
            <div class="timer-controls">
                <input type="number" class="timer-input" id="hoursInput" min="0" max="23" value="0" placeholder="HH">
                <span>:</span>
                <input type="number" class="timer-input" id="minutesInput" min="0" max="59" value="0" placeholder="MM">
                <span>:</span>
                <input type="number" class="timer-input" id="secondsInput" min="0" max="59" value="0" placeholder="SS">
                <button class="btn" style="padding: 10px 20px; font-size: 14px; background: #2a5298; color: white;" id="startTimerBtn">Start Timer</button>
            </div>
            
        </div>

        <div class="presets">
            <h2>Presets</h2>
            <div class="preset-buttons">
                <button class="preset-btn" data-preset="infra">Infra</button>
                <button class="preset-btn" data-preset="brown">Brown</button>
                <button class="preset-btn" data-preset="pink">Pink</button>
                <button class="preset-btn" data-preset="white">White</button>
                <button class="preset-btn" data-preset="blue">Blue</button>
                <button class="preset-btn" data-preset="violet">Violet</button>
                <button class="preset-btn" data-preset="ultra">Ultra</button>
                <button class="preset-btn" data-preset="grey">Grey</button>
                <button class="preset-btn" data-preset="green">Green</button>
            </div>
        </div>

        <div class="sliders">
            <h2>
                <span>Frequency Bands</span>
                <div class="volume-controls">
                    <button class="volume-btn" id="volumeDown">-5%</button>
                    <button class="volume-btn" id="volumeUp">+5%</button>
                </div>
            </h2>
            <div id="sliderContainer"></div>
        </div>
    </div>

    <script>
        let audioContext;
        let bufferSize = 4096;
        let noiseNode;
        let masterGain;
        let filters = [];
        let isPlaying = false;
        let timerInterval;
        let remainingSeconds = 0;
        let preciseValues = []; // Store precise values (0-1 range)


        const frequencyBands = [
            { name: '30 Hz (20-42 Hz)', low: 20, high: 42 },
            { name: '60 Hz (42-87 Hz)', low: 42, high: 87 },
            { name: '125 Hz (87-177 Hz)', low: 87, high: 177 },
            { name: '250 Hz (177-354 Hz)', low: 177, high: 354 },
            { name: '500 Hz (354-707 Hz)', low: 354, high: 707 },
            { name: '1k Hz (707-1.41k Hz)', low: 707, high: 1414 },
            { name: '2k Hz (1.41k-2.83k Hz)', low: 1414, high: 2828 },
            { name: '4k Hz (2.83k-5.66k Hz)', low: 2828, high: 5657 },
            { name: '8k Hz (5.66k-11.3k Hz)', low: 5657, high: 11314 },
            { name: '16k Hz (11.3k+ Hz)', low: 11314, high: 22000 }
        ];

        const presets = {
            white: [0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5],           // Flat spectrum - equal power all bands
            pink: [0.9, 0.78, 0.67, 0.58, 0.5, 0.43, 0.37, 0.32, 0.28, 0.24],    // -3.01 dB/octave (1/f)
            brown: [0.9, 0.64, 0.45, 0.32, 0.22, 0.16, 0.11, 0.08, 0.06, 0.04],  // -6.02 dB/octave (1/fÂ²)
            blue: [0.24, 0.28, 0.32, 0.37, 0.43, 0.5, 0.58, 0.67, 0.78, 0.9],    // +3.01 dB/octave (f)
            violet: [0.04, 0.06, 0.08, 0.11, 0.16, 0.22, 0.32, 0.45, 0.64, 0.9], // +6.02 dB/octave (fÂ²)
            grey: [0.7, 0.45, 0.35, 0.3, 0.28, 0.28, 0.3, 0.35, 0.45, 0.7],      // Psychoacoustic equal loudness curve
            green: [0.15, 0.25, 0.45, 0.7, 0.85, 0.7, 0.45, 0.25, 0.15, 0.08],   // Mid-frequency emphasis (nature sounds)
            infra: [0.66, 0.44, 0.28, 0.17, 0.08, 0.03, 0, 0, 0, 0],             // Sub-bass frequencies only
            ultra: [0, 0, 0, 0, 0.04, 0.09, 0.18, 0.28, 0.44, 0.66]              // High frequencies only
        };

        function init() {
            createSliders();
            setupEventListeners();
        }

        function createSliders() {
            const container = document.getElementById('sliderContainer');
            frequencyBands.forEach((band, index) => {
                const group = document.createElement('div');
                group.className = 'slider-group';
                
                const name = document.createElement('div');
                name.className = 'slider-name';
                name.textContent = band.name;
                
                const slider = document.createElement('input');
                slider.type = 'range';
                slider.className = 'slider';
                slider.min = '0';
                slider.max = '100';
                slider.value = '50';
                slider.id = `slider${index}`;
                preciseValues[index] = 0.5; // Initialize to 50% (0.5 in 0-1 range)
                
                const value = document.createElement('div');
                value.className = 'slider-value';
                value.id = `value${index}`;
                const displayValue = Math.round(preciseValues[index] * 100);
                value.textContent = displayValue + '%';
                
                slider.addEventListener('input', (e) => {
                    preciseValues[index] = e.target.value / 100;
                    document.getElementById(`value${index}`).textContent = e.target.value + '%';
                    if (isPlaying) {
                        updateFilter(index, preciseValues[index]);
                    }
                });
                
                group.appendChild(name);
                group.appendChild(slider);
                group.appendChild(value);
                container.appendChild(group);
            });
        }

        function setupEventListeners() {
            document.getElementById('toggleBtn').addEventListener('click', toggleNoise);
            
            document.querySelectorAll('.preset-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    applyPreset(e.target.dataset.preset);
                });
            });

            document.getElementById('startTimerBtn').addEventListener('click', startTimer);
            document.getElementById('volumeUp').addEventListener('click', () => adjustVolume(1.05));
            document.getElementById('volumeDown').addEventListener('click', () => adjustVolume(0.95));
        }

        function toggleNoise() {
            if (isPlaying) {
                stopNoise();
            } else {
                startNoise();
            }
        }

        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                noiseNode = audioContext.createScriptProcessor(bufferSize, 1, 1);
                noiseNode.onaudioprocess = (e) => {
                    const output = e.outputBuffer.getChannelData(0);
                    for (let i = 0; i < bufferSize; i++) {
                        output[i] = Math.random() * 2 - 1;
                    }
                };

                filters = frequencyBands.map((band, index) => {
                    const bandpass = audioContext.createBiquadFilter();
                    bandpass.type = 'bandpass';
                    bandpass.frequency.value = (band.low + band.high) / 2;
                    bandpass.Q.value = 1.0;
                    
                    const gain = audioContext.createGain();
                    gain.gain.value = 0.5;
                    
                    return { filter: bandpass, gain: gain };
                });

                masterGain = audioContext.createGain();
                masterGain.gain.value = 0.3;

                filters.forEach(f => {
                    noiseNode.connect(f.filter);
                    f.filter.connect(f.gain);
                    f.gain.connect(masterGain);
                });
                
                masterGain.connect(audioContext.destination);
            }
        }

        function startNoise() {
            if (!isPlaying) {
                initAudio();
                isPlaying = true;
                const toggleBtn = document.getElementById('toggleBtn');
                toggleBtn.textContent = 'OFF';
                toggleBtn.classList.remove('off');
                toggleBtn.classList.add('on');
                document.getElementById('status').textContent = 'Status: Playing';
                document.getElementById('status').classList.add('active');
            }
        }

        function stopNoise() {
            if (isPlaying) {
                isPlaying = false;
                if (audioContext) {
                    audioContext.close();
                    audioContext = null;
                }
                const toggleBtn = document.getElementById('toggleBtn');
                toggleBtn.textContent = 'ON';
                toggleBtn.classList.remove('on');
                toggleBtn.classList.add('off');
                document.getElementById('status').textContent = 'Status: Off';
                document.getElementById('status').classList.remove('active');
                
                if (timerInterval) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                }
            }
        }

        function updateFilter(index, value) {
            if (filters[index]) {
                filters[index].gain.gain.value = value;
            }
        }

        function applyPreset(presetName) {
            const values = presets[presetName];
            values.forEach((value, index) => {
                preciseValues[index] = value;
                const slider = document.getElementById(`slider${index}`);
                const displayValue = Math.round(value * 100);
                slider.value = displayValue;
                document.getElementById(`value${index}`).textContent = displayValue + '%';
                
                if (isPlaying) {
                    updateFilter(index, preciseValues[index]);
                }
            });
        }

        function adjustVolume(multiplier) {
            frequencyBands.forEach((band, index) => {
                // Update precise value
                preciseValues[index] = Math.min(1.0, preciseValues[index] * multiplier);
                // Update slider to rounded integer
                const displayValue = Math.round(preciseValues[index] * 100);
                const slider = document.getElementById(`slider${index}`);
                slider.value = displayValue;
                document.getElementById(`value${index}`).textContent = displayValue + '%';
                
                // Update audio with precise value
                if (isPlaying) {
                    updateFilter(index, preciseValues[index]);
                }
            });
        }

        function startTimer() {
            const hours = parseInt(document.getElementById('hoursInput').value) || 0;
            const minutes = parseInt(document.getElementById('minutesInput').value) || 0;
            const seconds = parseInt(document.getElementById('secondsInput').value) || 0;
            
            remainingSeconds = hours * 3600 + minutes * 60 + seconds;
            
            if (remainingSeconds <= 0) {
                alert('Please set a valid timer duration');
                return;
            }

            if (!isPlaying) {
                startNoise();
            }

            if (timerInterval) {
                clearInterval(timerInterval);
            }

            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                remainingSeconds--;
                updateTimerDisplay();
                
                if (remainingSeconds <= 0) {
                    clearInterval(timerInterval);
                    stopNoise();
                    timerInterval = null;
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const hours = Math.floor(remainingSeconds / 3600);
            const minutes = Math.floor((remainingSeconds % 3600) / 60);
            const seconds = remainingSeconds % 60;
            
            document.getElementById('timerDisplay').textContent = 
                `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        init();
    </script>
</body>
</html>